name: "go-install-test"
run-name: "go-install-test"
on:
  push:
    branches: master

jobs:
  test:
    runs-on: [ubuntu-22.04-slim]
    steps:
      - name: "checkout files"
        uses: actions/checkout@v4
        with:
          sparse-checkout: |
            go.sh
      
      - name: "run install script"
        shell: bash
        run: |
          echo -e "module github.com/jake-young-dev/go-install-script\n\ngo 1.23.5" > go.mod
          sudo ./go.sh ${{ vars.GO_TEST_ARCH }}