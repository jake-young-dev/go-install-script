name: "go-install-test"
run-name: "go-install-test"
on:
  push:
    branches: test/sudo

jobs:
  test:
    runs-on: [ubuntu-22.04]
    steps:
      - name: "setup env and remove cached go"
        shell: bash
        run: |  #images come with go preloaded on github hosted runners, removing for tests
          sudo rm -r /usr/bin/go 
          sudo rm -r /usr/bin/gofmt
          echo -e "module github.com/jake-young-dev/go-install-script\n\ngo 1.23.5" > go.mod

      - name: "run go script"
        uses: jake-young-dev/go-install-script@test/sudo
        with:
          architecture: amd64